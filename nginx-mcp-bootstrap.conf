# Nginx BOOTSTRAP configuration for Observe MCP Server
# Use this FIRST to obtain SSL certificates, then switch to nginx-mcp-final.conf
# Deploy to: /etc/nginx/sites-available/your-domain.example.com
# Symlink to: /etc/nginx/sites-enabled/your-domain.example.com

# Upstream backend configuration with keepalive
upstream mcp_backend {
    server localhost:8000;
    keepalive 32;
}

# HTTP server - allows certbot to work
server {
    listen 80;
    listen [::]:80;
    server_name your-domain.example.com;

    # Allow Let's Encrypt ACME challenge
    location /.well-known/acme-challenge/ {
        root /var/www/html;
    }

    # Temporary: Allow all traffic for certbot validation
    # After getting SSL cert, this will redirect to HTTPS
    location / {
        return 200 'MCP Server - Run certbot to enable HTTPS\n';
        add_header Content-Type text/plain;
    }
}
